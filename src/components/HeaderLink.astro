---
import type { HTMLAttributes } from 'astro/types';

type Props = HTMLAttributes<'a'>;

const { href, class: className, ...props } = Astro.props;

const { pathname } = Astro.url;
const isActive = href === pathname || href === pathname.replace(/\/$/, '') || (typeof href === 'string' && href !== '/' && pathname.includes(href));
---

<a href={href} class:list={[className, { active: isActive }]} {...props}>
	<slot />
</a>
<style>
	a {
		position: relative;
		display: inline-block;
		background: #000;
		padding: 0.5rem 1rem;
		text-decoration: none;
		transition: all 0.2s;
		overflow: hidden;
		border-radius: 10px;
		color: rgba(255, 255, 255, 0.7);
	}

	/* Default: subtle, muted border */
	a::before {
		content: "";
		position: absolute;
		inset: 0;
		border-radius: inherit;
		padding: 1px;
		background: linear-gradient(
			to right,
			rgba(6, 182, 212, 0.4),
			rgba(139, 92, 246, 0.4),
			rgba(251, 146, 60, 0.4)
		);
		-webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
		-webkit-mask-composite: xor;
		mask-composite: exclude;
		pointer-events: none;
		transition: all 0.2s;
	}

	/* Hover: vibrant border + glow + bright text */
	a:hover {
		color: #fff;
		/* box-shadow: 0 0 20px rgba(139, 92, 246, 0.4); */
		transform: translateY(-1px);
	}

	a:hover::before {
		padding: 1px;
		background: linear-gradient(
			to right,
			rgba(6, 182, 212, 1),
			rgba(139, 92, 246, 1),
			rgba(251, 146, 60, 1)
		);
	}

	/* Active/Selected: same as hover, always on */
	a.active {
		color: #fff;
		font-weight: bold;
		/* box-shadow: 0 0 20px rgba(139, 92, 246, 0.4); */
	}

	a.active::before {
		padding: 1px;
		background: linear-gradient(
			to right,
			rgba(6, 182, 212, 1),
			rgba(139, 92, 246, 1),
			rgba(251, 146, 60, 1)
		);
	}
</style>
